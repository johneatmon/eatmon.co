---
import type { HTMLAttributes } from "astro/types"
import { SOCIALS } from "../data/config"
import FancyButton from "./FancyButton.astro"

const cv = SOCIALS.filter((x) => x.label === "ReadCV")
	.map(({ href }) => href)
	.toString()

interface Props extends HTMLAttributes<"section"> {}

const { ...attrs } = Astro.props as Props

const roles = [
	{
		company: "ProSource",
		role: "Designer/Developer/Writer",
		date: "Oct 2020&ndash;Present",
	},
	{
		company: "ProSource",
		role: "IT Coordinator",
		date: "May 2016&ndash;Oct 2020",
	},
	{
		company: "ProSource",
		role: "Intern",
		date: "Dec 2014&ndash;Dec 2015",
	},
]
---

<section aria-labelledby="#experience" {...attrs}>
	<h2 id="experience" class="mb-8 font-medium text-gray-500 dark:text-gray-400">Experience</h2>
	<ul role="list" class="mb-8 flex flex-col gap-4 tabular-nums">
		{
			roles.map(({ company, role, date }) => (
				<li class="flex w-full flex-wrap items-center gap-x-1">
					<span class="w-full text-xs sm:w-auto sm:text-base">{company}</span>
					<div
						aria-hidden="true"
						class="dark:to-gray-1000 hidden h-px flex-grow bg-gradient-to-r from-gray-300 via-gray-300 to-gray-50 dark:from-white/10 dark:via-white/10 sm:flex"
					/>
					<p class="flex flex-wrap gap-x-4">
						{role}
						<span class="w-full text-gray-500 dark:text-gray-400 sm:w-auto" set:html={date} />
					</p>
				</li>
			))
		}
	</ul>
	<FancyButton href={cv} class="!block sm:!inline-block">Read my résumé</FancyButton>
</section>
